Building DAG of jobs...
Your conda installation is not configured to use strict channel priorities. This is however crucial for having robust and correct environments (for details, see https://conda-forge.org/docs/user/tipsandtricks.html). Please consider to configure strict priorities by executing 'conda config --set channel_priority strict'.
Using shell: /bin/bash
Provided cores: 64
Rules claiming more threads will be scaled down.
Job stats:
job               count    min threads    max threads
--------------  -------  -------------  -------------
all                   1              1              1
maxbin2               1              1              1
pileup                1              1              1
pileup_install        1              1              1
prokka_bin            1             16             16
total                 5              1             16

Select jobs to execute...

[Mon Feb 27 09:41:31 2023]
rule pileup_install:
    output: results/bin/bbmap/pileup.sh
    jobid: 4
    reason: Missing output files: results/bin/bbmap/pileup.sh
    resources: tmpdir=/tmp

[Mon Feb 27 09:41:36 2023]
Finished job 4.
1 of 5 steps (20%) done
Select jobs to execute...

[Mon Feb 27 09:41:36 2023]
rule pileup:
    input: results/bin/bbmap/pileup.sh, results/M1/bowtie2/M1.sam
    output: results/M1/pileup/M1_cov.txt, results/M1/pileup/M1_abundance.txt
    jobid: 3
    reason: Updated input files: results/M1/bowtie2/M1.sam; Input files updated by another job: results/bin/bbmap/pileup.sh
    wildcards: sample=M1
    resources: tmpdir=/tmp

[Mon Feb 27 09:42:18 2023]
Finished job 3.
2 of 5 steps (40%) done
Select jobs to execute...

[Mon Feb 27 09:42:18 2023]
rule maxbin2:
    input: results/M1/megahit/final.contigs.fa, results/M1/pileup/M1_abundance.txt
    output: results/M1/maxbin, results/M1/maxbin/list_bins.txt
    jobid: 2
    reason: Missing output files: results/M1/maxbin; Input files updated by another job: results/M1/pileup/M1_abundance.txt
    wildcards: sample=M1
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/4e3c652eb1f0884dff60385860f576a5_
ImproperOutputException in rule maxbin2 in file /storage1/victor/speedypipe4meta/Snakefile, line 207:
Outputs of incorrect type (directories when expecting files or vice versa). Output directories must be flagged with directory(). for rule maxbin2:
    output: results/M1/maxbin, results/M1/maxbin/list_bins.txt
    wildcards: sample=M1
    affected files:
        results/M1/maxbin
Removing output files of failed job maxbin2 since they might be corrupted:
results/M1/maxbin, results/M1/maxbin/list_bins.txt
Skipped removing non-empty directory results/M1/maxbin
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2023-02-27T094128.833611.snakemake.log
